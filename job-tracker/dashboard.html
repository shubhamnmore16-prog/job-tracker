<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pro Dashboard - AI Job Tracker</title>
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #E40000; /* Airtel Red */
      --primary-dark: #b30000;
      --secondary: #2d3748;
      --bg-gradient: linear-gradient(135deg, #f6f9fc 0%, #edf2f7 100%);
      --glass-bg: rgba(255, 255, 255, 0.95);
      --shadow: 0 10px 30px rgba(0,0,0,0.08);
      --card-radius: 20px;
    }

    body {
      margin: 0; font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient); color: var(--secondary);
      min-height: 100vh;
    }

    /* --- HEADER --- */
    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(255,255,255,0.9); backdrop-filter: blur(12px);
      padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.03); border-bottom: 3px solid var(--primary);
    }
    .logo-area { display: flex; align-items: center; gap: 12px; }
    .logo-icon { font-size: 28px; color: var(--primary); }
    .logo-text { font-size: 22px; font-weight: 700; color: #1a202c; letter-spacing: -0.5px; }

    .nav-links { display: flex; gap: 25px; align-items: center; }
    .nav-link { text-decoration: none; color: #718096; font-weight: 500; transition: 0.3s; font-size: 15px; }
    .nav-link:hover, .nav-link.active { color: var(--primary); font-weight: 600; }
    
    .logoutBtn {
      background: #1a202c; color: white; border: none; padding: 10px 24px;
      border-radius: 30px; cursor: pointer; font-weight: 600; transition: 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    .logoutBtn:hover { background: var(--primary); transform: translateY(-2px); }

    /* --- DASHBOARD CONTENT --- */
    .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }

    /* Stats Cards */
    .stats-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 25px; margin-bottom: 40px;
    }
    .stat-card {
      background: white; padding: 25px; border-radius: var(--card-radius);
      box-shadow: var(--shadow); position: relative; overflow: hidden;
      transition: transform 0.3s ease; border: 1px solid #edf2f7;
    }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
    .stat-card::before { content:''; position: absolute; top: 0; left: 0; width: 6px; height: 100%; }
    
    .stat-icon { position: absolute; top: 20px; right: 20px; font-size: 40px; opacity: 0.1; }
    .stat-label { font-size: 14px; color: #718096; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
    .stat-value { font-size: 36px; font-weight: 700; margin-top: 10px; color: #2d3748; }

    .card-applied { border-left: 5px solid #3182ce; } .card-applied .stat-value { color: #3182ce; }
    .card-interview { border-left: 5px solid #d69e2e; } .card-interview .stat-value { color: #d69e2e; }
    .card-offer { border-left: 5px solid #38a169; } .card-offer .stat-value { color: #38a169; }
    .card-rejected { border-left: 5px solid #e53e3e; } .card-rejected .stat-value { color: #e53e3e; }

    /* Controls */
    .action-bar {
      display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; margin-bottom: 30px;
    }
    .search-wrap {
      flex: 1; max-width: 400px; position: relative;
    }
    .search-wrap input {
      width: 100%; padding: 16px 20px 16px 50px; border-radius: 15px; border: none;
      background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.05); outline: none; font-family: inherit;
    }
    .search-wrap i { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #a0aec0; }

    .add-btn {
      background: linear-gradient(135deg, #E40000 0%, #ff4d4d 100%);
      color: white; border: none; padding: 14px 30px; border-radius: 15px;
      font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px;
      box-shadow: 0 8px 20px rgba(228, 0, 0, 0.3); transition: 0.3s;
    }
    .add-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 25px rgba(228, 0, 0, 0.4); }

    /* Job List */
    .jobs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; padding-bottom: 100px; }
    
    .job-card {
      background: white; padding: 25px; border-radius: 20px; position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid #f7fafc;
      transition: 0.3s; display: flex; flex-direction: column; justify-content: space-between;
    }
    .job-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 15px 30px rgba(0,0,0,0.08); }

    .job-role { font-size: 18px; font-weight: 700; color: #2d3748; margin-bottom: 5px; }
    .job-company { display: flex; align-items: center; gap: 8px; font-size: 14px; color: #718096; margin-bottom: 20px; }
    
    .status-pill {
      display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 700;
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    .pill-Applied { background: #ebf8ff; color: #3182ce; }
    .pill-Interview { background: #fefcbf; color: #d69e2e; }
    .pill-Offer { background: #f0fff4; color: #38a169; }
    .pill-Rejected { background: #fff5f5; color: #e53e3e; }

    .card-actions {
      margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid #f1f5f9; padding-top: 15px;
    }
    .action-icon {
      width: 35px; height: 35px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: 0.2s; border: none;
    }
    .btn-edit { background: #edf2f7; color: #4a5568; } .btn-edit:hover { background: #e2e8f0; color: #2d3748; }
    .btn-del { background: #fff5f5; color: #e53e3e; } .btn-del:hover { background: #fed7d7; }

    /* Modal */
    .modal-overlay {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; justify-content: center; align-items: center;
    }
    .modal-box {
      background: white; padding: 40px; border-radius: 24px; width: 90%; max-width: 450px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.2); animation: popIn 0.3s ease;
    }
    @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    
    .modal-box h2 { margin-top: 0; color: var(--primary); font-size: 24px; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #4a5568; }
    .form-group input, .form-group select {
      width: 100%; padding: 14px; border: 2px solid #edf2f7; border-radius: 12px; outline: none;
      font-family: inherit; transition: 0.3s;
    }
    .form-group input:focus, .form-group select:focus { border-color: var(--primary); background: #fff5f5; }
    
    .save-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px; }
    .cancel-btn { width: 100%; padding: 15px; background: transparent; color: #718096; border: none; font-weight: 600; cursor: pointer; margin-top: 10px; }

    /* ========================================= */
    /* --- ULTIMATE CHATBOT CSS --- */
    /* ========================================= */
    :root { --bot-red: #E40000; --bot-white: #ffffff; }
    
    .fab-btn {
      position: fixed; bottom: 30px; right: 30px; background-color: var(--bot-red); color: white;
      width: 70px; height: 70px; border-radius: 50%; border: none; font-size: 30px;
      box-shadow: 0 10px 30px rgba(228, 0, 0, 0.4); cursor: pointer; z-index: 1000;
      display: flex; align-items: center; justify-content: center; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .fab-btn:hover { transform: scale(1.1) rotate(10deg); }

    .chat-widget {
      position: fixed; bottom: 120px; right: 30px; width: 400px; height: 600px;
      background-color: var(--bot-white); border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2); display: none; flex-direction: column;
      overflow: hidden; border: 1px solid rgba(0,0,0,0.05); z-index: 1001; 
      font-family: 'Poppins', sans-serif; animation: slideUp 0.3s ease;
    }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    .chat-header {
      background: linear-gradient(135deg, #E40000 0%, #ff4d4d 100%);
      color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center;
    }
    .bot-profile { display: flex; align-items: center; gap: 10px; }
    .bot-avatar { width: 35px; height: 35px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 18px; }

    .chat-body { flex: 1; padding: 25px; background: #f8fafc; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
    
    .msg-row { display: flex; width: 100%; }
    .msg-bubble { 
      max-width: 80%; padding: 14px 18px; border-radius: 18px; font-size: 14px; line-height: 1.5; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .bot-msg { background: white; color: #2d3748; border-bottom-left-radius: 4px; }
    .user-msg { background: var(--bot-red); color: white; margin-left: auto; border-bottom-right-radius: 4px; }
    
    .bot-msg a { color: var(--bot-red); font-weight: 700; text-decoration: none; border-bottom: 1px dashed; }

    .chat-footer { padding: 15px; background: white; border-top: 1px solid #edf2f7; display: flex; gap: 10px; align-items: center; }
    .chat-input { flex: 1; padding: 12px 15px; border: 1px solid #e2e8f0; border-radius: 25px; outline: none; transition: 0.3s; }
    .chat-input:focus { border-color: var(--bot-red); }
    
    .chips-container { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 5px; }
    .chip { 
      background: white; border: 1px solid #e2e8f0; font-size: 12px; padding: 8px 14px; 
      border-radius: 20px; cursor: pointer; transition: 0.2s; color: #4a5568; font-weight: 500;
    }
    .chip:hover { background: #fff5f5; color: var(--bot-red); border-color: var(--bot-red); }

    .typing { display: none; padding: 10px; background: white; border-radius: 15px; width: fit-content; margin-bottom: 10px; }
    .typing span { display: inline-block; width: 5px; height: 5px; background: #cbd5e0; border-radius: 50%; animation: bounce 1.4s infinite; margin: 0 2px; }
    @keyframes bounce { 0%, 100% { transform: scale(0); } 50% { transform: scale(1); } }

  </style>
</head>
<body>

  <header>
    <div class="logo-area">
      <i class="fas fa-rocket logo-icon"></i>
      <h1 class="logo-text">AI Job Tracker</h1>
    </div>
    <nav class="nav-links">
      <a href="index.html" class="nav-link">Home</a>
      <a href="dashboard.html" class="nav-link active">Dashboard</a>
      <button class="logoutBtn" id="logoutBtn">Logout <i class="fas fa-sign-out-alt"></i></button>
    </nav>
  </header>

  <div class="container">
    
    <div class="stats-grid">
      <div class="stat-card card-applied">
        <i class="fas fa-paper-plane stat-icon"></i>
        <div class="stat-label">Applications</div>
        <div class="stat-value" id="countApplied">0</div>
      </div>
      <div class="stat-card card-interview">
        <i class="fas fa-user-tie stat-icon"></i>
        <div class="stat-label">Interviews</div>
        <div class="stat-value" id="countInterview">0</div>
      </div>
      <div class="stat-card card-offer">
        <i class="fas fa-check-circle stat-icon"></i>
        <div class="stat-label">Offers</div>
        <div class="stat-value" id="countOffer">0</div>
      </div>
      <div class="stat-card card-rejected">
        <i class="fas fa-times-circle stat-icon"></i>
        <div class="stat-label">Rejections</div>
        <div class="stat-value" id="countRejected">0</div>
      </div>
    </div>

    <div class="action-bar">
      <div class="search-wrap">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Search by Company or Role...">
      </div>
      <button class="add-btn" onclick="openModal()">
        <i class="fas fa-plus-circle"></i> Add New Job
      </button>
    </div>

    <div class="jobs-grid" id="jobList">
      <p style="grid-column: 1/-1; text-align: center; color: #a0aec0; margin-top: 50px;">
        <i class="fas fa-spinner fa-spin"></i> Loading your career data...
      </p>
    </div>
  
  </div>

  <div class="modal-overlay" id="jobModal">
    <div class="modal-box">
      <h2 id="modalTitle">Add Job Application</h2>
      <input type="hidden" id="jobId">
      
      <div class="form-group">
        <label>Job Role</label>
        <input type="text" id="jobTitle" placeholder="e.g. Frontend Developer">
      </div>
      
      <div class="form-group">
        <label>Company Name</label>
        <input type="text" id="jobCompany" placeholder="e.g. Google India">
      </div>
      
      <div class="form-group">
        <label>Current Status</label>
        <select id="jobStatus">
          <option value="Applied">Applied</option>
          <option value="Interview">Interview</option>
          <option value="Offer">Offer</option>
          <option value="Rejected">Rejected</option>
        </select>
      </div>

      <button class="save-btn" onclick="saveJob()">Save Application</button>
      <button class="cancel-btn" onclick="closeModal()">Cancel</button>
    </div>
  </div>

  <button class="fab-btn" onclick="toggleChat()">
    <i class="fas fa-comment-dots"></i>
  </button>

  <div class="chat-widget" id="chatWidget">
    <div class="chat-header">
      <div class="bot-profile">
        <div class="bot-avatar"><i class="fas fa-robot"></i></div>
        <span style="font-size:16px; font-weight:600;">AI Job Assistant</span>
      </div>
      <i class="fas fa-times" onclick="toggleChat()" style="cursor:pointer; opacity:0.8;"></i>
    </div>

    <div class="chat-body" id="chatBody">
      <div class="msg-row">
        <div class="msg-bubble bot-msg">
          Hello! üëã I am connected to your dashboard.<br>
          I can <b>track your jobs</b>, <b>analyze resumes</b>, or <b>find new jobs</b>.
        </div>
      </div>
      
      <div class="chips-container">
        <div class="chip" onclick="askBot('My Job Status')">üìä My Stats</div>
        <div class="chip" onclick="askBot('Find New Jobs')">üî• Find Jobs</div>
        <div class="chip" onclick="askBot('Upload Resume')">üìÑ Check Resume</div>
        <div class="chip" onclick="askBot('What is Job Tracking?')">‚ùì Help</div>
      </div>

      <div class="typing" id="typing"><span></span><span></span><span></span></div>
    </div>

    <div class="chat-footer">
      <input type="file" id="resumeUpload" hidden onchange="handleFile(event)">
      <i class="fas fa-paperclip" style="color:#718096; font-size:20px; cursor:pointer;" onclick="document.getElementById('resumeUpload').click()"></i>
      
      <input type="text" id="userIn" class="chat-input" placeholder="Type a message..." onkeypress="handleEnter(event)">
      
      <i class="fas fa-paper-plane" style="color:var(--primary); font-size:22px; cursor:pointer;" onclick="sendMessage()"></i>
    </div>
  </div>


  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // 1. FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyBSBijnLqmZOW0MGBLT3ZhxOZt0PqBt6S8",
      authDomain: "royal-look-b4ec5.firebaseapp.com",
      databaseURL: "https://royal-look-b4ec5-default-rtdb.firebaseio.com",
      projectId: "royal-look-b4ec5",
      storageBucket: "royal-look-b4ec5.firebasestorage.app",
      messagingSenderId: "764728705871",
      appId: "1:764728705871:web:7a84c3519f45e5e7863b3a",
      measurementId: "G-6KEMRJ1NY0"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const auth = firebase.auth();
    const db = firebase.database();
    
    let currentUser = null;
    let localJobsData = []; // Chatbot memory

    // 2. AUTH & DATA LOADING
    auth.onAuthStateChanged((user) => {
      if (user) {
        currentUser = user;
        loadJobs(user.uid);
      } else {
        window.location.href = 'login.html';
      }
    });

    function loadJobs(uid) {
      const jobListEl = document.getElementById('jobList');
      
      db.ref('jobs/' + uid).on('value', (snapshot) => {
        jobListEl.innerHTML = '';
        localJobsData = [];
        let counts = { Applied:0, Interview:0, Offer:0, Rejected:0 };
        
        const data = snapshot.val();
        
        if (!data) {
          jobListEl.innerHTML = `
            <div style="grid-column:1/-1; text-align:center; padding:50px;">
              <img src="https://cdn-icons-png.flaticon.com/512/7486/7486744.png" width="100" style="opacity:0.5; margin-bottom:20px;">
              <h3 style="color:#718096;">No jobs tracked yet</h3>
              <p style="color:#a0aec0;">Click "Add New Job" to get started!</p>
            </div>
          `;
        } else {
          Object.keys(data).forEach((key) => {
            const job = data[key];
            job.id = key;
            localJobsData.push(job);
            
            if(counts[job.status] !== undefined) counts[job.status]++;

            const card = document.createElement('div');
            card.className = 'job-card';
            card.innerHTML = `
              <div>
                <div class="job-role">${job.title}</div>
                <div class="job-company"><i class="fas fa-building"></i> ${job.company}</div>
                <div class="status-pill pill-${job.status}">${job.status}</div>
              </div>
              <div class="card-actions">
                <button class="action-icon btn-edit" onclick="editJob('${key}', '${job.title}', '${job.company}', '${job.status}')" title="Edit">
                  <i class="fas fa-pen"></i>
                </button>
                <button class="action-icon btn-del" onclick="deleteJob('${key}')" title="Delete">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            `;
            jobListEl.appendChild(card);
          });
        }
        
        // Update Stats UI
        document.getElementById('countApplied').innerText = counts.Applied;
        document.getElementById('countInterview').innerText = counts.Interview;
        document.getElementById('countOffer').innerText = counts.Offer;
        document.getElementById('countRejected').innerText = counts.Rejected;
      });
    }

    // 3. CRUD OPERATIONS
    function saveJob() {
      const title = document.getElementById('jobTitle').value;
      const company = document.getElementById('jobCompany').value;
      const status = document.getElementById('jobStatus').value;
      const id = document.getElementById('jobId').value;

      if(!title || !company) return alert("Please fill all details");

      const jobData = { title, company, status, date: Date.now() };

      if (id) db.ref('jobs/' + currentUser.uid + '/' + id).update(jobData);
      else db.ref('jobs/' + currentUser.uid).push(jobData);
      
      closeModal();
    }

    function deleteJob(id) {
      if(confirm("Are you sure you want to remove this application?")) {
        db.ref('jobs/' + currentUser.uid + '/' + id).remove();
      }
    }

    // Modal Functions
    const modal = document.getElementById('jobModal');
    function openModal() { 
      modal.style.display = 'flex'; 
      document.getElementById('jobId').value = ''; 
      document.getElementById('jobTitle').value = ''; 
      document.getElementById('jobCompany').value = ''; 
      document.getElementById('modalTitle').innerText = "Add Application"; 
    }
    function closeModal() { modal.style.display = 'none'; }
    function editJob(id, title, comp, stat) {
      openModal();
      document.getElementById('jobId').value = id;
      document.getElementById('jobTitle').value = title;
      document.getElementById('jobCompany').value = comp;
      document.getElementById('jobStatus').value = stat;
      document.getElementById('modalTitle').innerText = "Edit Application";
    }

    // Search Filter
    document.getElementById('searchInput').addEventListener('input', function(e) {
      const term = e.target.value.toLowerCase();
      const cards = document.querySelectorAll('.job-card');
      cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        card.style.display = text.includes(term) ? 'flex' : 'none';
      });
    });

    document.getElementById('logoutBtn').onclick = () => auth.signOut().then(() => window.location.href='login.html');


    // =========================================
    // 4. POWERFUL CHATBOT LOGIC
    // =========================================
    const chatWidget = document.getElementById('chatWidget');
    const chatBody = document.getElementById('chatBody');
    const typing = document.getElementById('typing');

    // Combined Knowledge Base + Bot Logic
    const knowledgeBase = [
        { keys: ["hi", "hello", "hey"], answer: "Hello! üëã I am your Job Assistant. I can track your applications or search for new jobs." },
        { keys: ["ok", "okk", "okay", "good", "great"], answer: "Awesome! üëç Let me know if you need anything else." },
        { keys: ["thank", "thx"], answer: "You're welcome! üòä Happy to help." },
        { keys: ["what is", "tracking system"], answer: "<b>Job Tracking System</b> helps users track job applications, status, and interviews in one place." },
        { keys: ["add", "new job"], answer: "Click the <b>'+ Add New Job'</b> button on the dashboard to save a new application." },
        { keys: ["status", "types"], answer: "Available statuses: Applied, Interview, Offer, and Rejected." },
        { keys: ["resume", "analysis"], answer: "Upload your resume using the üìé icon, and I will give you an AI score." }
    ];

    function toggleChat() { 
      chatWidget.style.display = (chatWidget.style.display === 'flex') ? 'none' : 'flex'; 
    }
    function handleEnter(e) { if(e.key === 'Enter') sendMessage(); }
    function askBot(msg) { document.getElementById('userIn').value = msg; sendMessage(); }

    function sendMessage() {
      const input = document.getElementById('userIn');
      const text = input.value.trim().toLowerCase();
      if(!text) return;

      addChatMsg(input.value, 'user');
      input.value = '';
      showTyping();

      setTimeout(() => {
        hideTyping();
        let reply = "";

        // 1. Check Knowledge Base
        const kbMatch = knowledgeBase.find(kb => kb.keys.some(k => text.includes(k)));
        
        if (kbMatch) {
          reply = kbMatch.answer;
        } 
        // 2. Real-time Dashboard Data Questions
        else if (text.includes('status') || text.includes('stats') || text.includes('how many')) {
          const applied = localJobsData.filter(j => j.status === 'Applied').length;
          const interview = localJobsData.filter(j => j.status === 'Interview').length;
          const offer = localJobsData.filter(j => j.status === 'Offer').length;
          const rejected = localJobsData.filter(j => j.status === 'Rejected').length;
          
          reply = `Here are your live stats:<br>
          üîπ <b>Applied:</b> ${applied}<br>
          üî∏ <b>Interview:</b> ${interview}<br>
          ‚úÖ <b>Offers:</b> ${offer}<br>
          üî¥ <b>Rejected:</b> ${rejected}`;
        }
        else if (text.includes('rejected list') || text.includes('who rejected')) {
           const list = localJobsData.filter(j => j.status === 'Rejected').map(j => j.company).join(', ');
           reply = list ? `Rejections from: <b>${list}</b>. Keep going!` : "No rejections found! üéâ";
        }
        // 3. Job Search Integration
        else if (text.includes('find') || text.includes('search') || text.includes('shine')) {
          reply = `I found 45,000+ jobs on Shine.com.<br>üëâ <a href="https://www.shine.com/job-search/test-jobs" target="_blank">Click to Apply Now</a>`;
        }
        // 4. Resume
        else if (text.includes('resume') || text.includes('upload')) {
           reply = "Please click the paperclip üìé icon to upload your resume for AI analysis.";
        }
        // 5. Fallback
        else {
          reply = "I'm not sure about that. You can ask me: 'How many interviews?', 'Find jobs', or 'Upload Resume'.";
        }

        addChatMsg(reply, 'bot');
      }, 800);
    }

    function handleFile(e) {
        const file = e.target.files[0];
        if(!file) return;
        addChatMsg(`üìÑ Uploading: ${file.name}...`, 'user');
        showTyping();
        setTimeout(() => { 
            hideTyping(); 
            addChatMsg(`‚úÖ <b>Analysis Complete!</b><br>AI Score: <b>88/100</b>.<br>Your resume is strong for Developer roles!`, 'bot'); 
        }, 2000);
    }

    function addChatMsg(html, type) {
      const body = document.getElementById('chatBody');
      const div = document.createElement('div');
      div.className = `msg-row`;
      div.innerHTML = `<div class="msg-bubble ${type}-msg">${html}</div>`;
      body.appendChild(div);
      body.scrollTop = body.scrollHeight;
    }
    
    function showTyping() { typing.style.display = 'block'; chatBody.scrollTop = chatBody.scrollHeight; }
    function hideTyping() { typing.style.display = 'none'; }

  </script>
</body>
</html>